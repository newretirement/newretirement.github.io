<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-apis/fpe/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Overview | NewRetirement API Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developers.newretirement.com/docs/apis/fpe/overview/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Overview | NewRetirement API Documentation"><meta data-rh="true" name="description" content="Understanding FPE endpoints and responses"><meta data-rh="true" property="og:description" content="Understanding FPE endpoints and responses"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developers.newretirement.com/docs/apis/fpe/overview/"><link data-rh="true" rel="alternate" href="https://developers.newretirement.com/docs/apis/fpe/overview/" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.newretirement.com/docs/apis/fpe/overview/" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"><link rel="stylesheet" href="/assets/css/styles.15a858cb.css">
<link rel="preload" href="/assets/js/runtime~main.f569d088.js" as="script">
<link rel="preload" href="/assets/js/main.67aaa0b9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/nr_mark_jade.svg" alt="NewRetirement Logo" class="themedImage_ToTc themedImage--light_HNdA" width="36"><img src="/img/nr_mark_jade.svg" alt="NewRetirement Logo" class="themedImage_ToTc themedImage--dark_i4oU" width="36"></div><b class="navbar__title text--truncate"><span>NewRetirement</span><span>Docs</span></b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/newretirement/fpe-api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link buttoned" href="/docs/getting-started/">Get API &amp; widget access</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started/">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts/">NewRetirement concepts and models</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/widgets/">Widgets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Widgets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/apis/">APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/financial-planning-engine-fpe/">Financial Planning Engine (FPE)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Financial Planning Engine (FPE)&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/apis/fpe/overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apis/fpe/datatypes/">Data Structures and Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apis/fpe/income_linked_contribs/">Income-Linked Contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apis/fpe/output_streams/">Output Streams Defined</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apis/fpe/terms/">Terminology</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="house" class="svg-inline--fa fa-house" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M567.5 229.7C577.6 238.3 578.9 253.4 570.3 263.5C561.7 273.6 546.6 274.9 536.5 266.3L512 245.5V432C512 476.2 476.2 512 432 512H144C99.82 512 64 476.2 64 432V245.5L39.53 266.3C29.42 274.9 14.28 273.6 5.7 263.5C-2.875 253.4-1.634 238.3 8.473 229.7L272.5 5.7C281.4-1.9 294.6-1.9 303.5 5.7L567.5 229.7zM144 464H192V312C192 289.9 209.9 272 232 272H344C366.1 272 384 289.9 384 312V464H432C449.7 464 464 449.7 464 432V204.8L288 55.47L112 204.8V432C112 449.7 126.3 464 144 464V464zM240 464H336V320H240V464z"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/apis/"><span itemprop="name">APIs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/financial-planning-engine-fpe/"><span itemprop="name">Financial Planning Engine (FPE)</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Overview</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>FPE - Financial Projection Engine</h1><h1>Overview</h1><p>FPE implements a mathematical model for forecasting a person’s future financial state throughout their lifetime given their current financial state, various future financial assumptions, and real world market/tax data as model inputs.</p><p>Starting at the present month, FPE projects future financial state by calculating a set of “month-over-month” <a href="https://en.wikipedia.org/wiki/Time_series" target="_blank" rel="noopener noreferrer">time series</a> vectors, where each vector represents a discrete account balance or payment stream over the course of the financial plan.</p><br><hr><br><h1>API Keys</h1><p>All FPE endpoints require a valid API key, which must be provided in the request header.  For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">POST /fpe/v5/forecast HTTP/1.1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">X-Api-Key: abcdefg1234567</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Failure to provide a valid API key will trigger an <a href="#http-response-status-codes">HTTP 403 Forbidden</a> error response.</p><br><hr><br><h1>API Versioning</h1><p>FPE uses <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">semantic versioning</a> as its software versioning policy.  The version of a running FPE service can be obtained in 2 ways:</p><ol><li><strong>HTTP response header</strong>: All endpoints add a <code>Fpe-Version</code> header attribute to their response.</li><li><strong><a href="#get-info">GET /fpe/v5/info</a></strong>: This endpoint returns the version, along with other build/deploy related info.</li></ol><br><hr><br><h1>Error Handling</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="errors-vs-warnings">Errors vs. Warnings<a class="hash-link" href="#errors-vs-warnings" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-an-error">What is an Error<a class="hash-link" href="#what-is-an-error" title="Direct link to heading">​</a></h3><p>An error occurs if the API client submits a request for which FPE cannot return a meaningful response (for any reason). In the event of an error, FPE returns:</p><ul><li>An HTTP status code appropriate for the type of error (see <a href="#http-response-status-codes">HTTP Response Status Codes</a> further down)</li><li>A <code>text/plain</code> detail message</li></ul><p>For example, if the client calls <code>POST /fpe/v5/forecast</code> and provides an invalid birthDate of <code>1200-01</code>, FPE responses with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">HTTP/1.1 400 Bad Request</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Content-Length: 67</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Error parsing JSON request: Valid year range is [1900..2200]: 1200</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-warning">What is a Warning<a class="hash-link" href="#what-is-a-warning" title="Direct link to heading">​</a></h3><p>Suppose the API client submits a well-formed JSON request, but one or more attributes don’t quite make sense (e.g. an account annual growth rate of 3000%).  If FPE is able to infer the intended value (or otherwise modify the value to make it acceptable), it will modify the request accordingly, execute it, and return a result.</p><p>In addition, the response will include a <code>warnings[]</code> list at the top level of the JSON response, like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">{</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  ... the rest of the response ...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  &quot;warnings&quot;: [</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;code&quot;: &quot;insufficientFunds&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;context&quot;: &quot;expenseHandler.account&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;message&quot;: &quot;Insufficient funds. desired=50000.00, actual=49310.00&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;account&quot;: &quot;savings&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;paymentStream&quot;: &quot;buy_future_annuity&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;details&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;actual&quot;: 49310,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;date&quot;: &quot;2022-01&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;desired&quot;: 50000</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;code&quot;: &quot;valueOutOfRange&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;context&quot;: &quot;accounts.fidelity_ira.apy&quot;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;message&quot;: &quot;fidelity_ira account.rate.mean is out of range: 0.99. Valid range is [-0.4, 0.4].&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      &quot;details&quot;: {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;min&quot;: -0.4</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;max&quot;: 0.4,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;desired&quot;: 0.99,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          &quot;actual&quot;: 0.4,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-response-status-codes">HTTP Response Status Codes<a class="hash-link" href="#http-response-status-codes" title="Direct link to heading">​</a></h2><p>The FPE service uses standard <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">HTTP response status codes</a> to indicate the success or failure of an API request.  In the event of an error, the HTTP response body will contain a short
description of the problem (Content-Type: text/plain).</p><p>Below is a list of possible status codes.  API Clients should be prepared to handle any of these.</p><p><strong><code>2xx OK</code></strong></p><p>Status codes in the <code>2xx</code> range indicate the request was understood and successfully handled.</p><br><p><strong><code>400 Bad Request</code></strong></p><p>Something was wrong with the client request such that FPE was unable understand it well enough to return any sort of useful result.  Typical causes for this error are:</p><ol><li>Malformed JSON request</li><li>Critical information was missing from the request (e.g. <code>birthDate</code> omitted)</li></ol><br><p><strong><code>403 Forbidden</code></strong></p><p>The server understood the client request, but refuses to authorize it.  This typically happens when an endpoint requires a valid API key, but did not receive one.  The key should be sent as a <code>X-Api-Key</code> header parameter.</p><br><p><strong><code>404 Not Found</code></strong></p><p>The requested resource or method doesn’t exist (e.g. <code>GET /fpe/v5/fake/path/123</code>).</p><br><p><strong><code>405 Method Not Allowed</code></strong></p><p>The request method is valid (e.g. <code>GET</code>, <code>POST</code>), but is not supported by the requested resource.  For example, <code>GET /fpe/v5/forecast</code> will return <code>HTTP 405</code>, since endpoint only supports the <code>POST</code> HTTP method.</p><br><p><strong><code>429 Too Many Requests</code></strong></p><p>The client has sent too many requests in a given amount of time (“rate limiting”).</p><br><p><strong><code>500 Internal Server Error</code></strong></p><p>Indicates something went wrong within the FPE service (these are rare).</p><br><p><strong><code>502 Bad Gateway</code></strong></p><p>Indicates the FPE service encountered some sort of problem communicating with
a dependent web service, and was therefore unable to return a meaningful result.</p><br><p><strong><code>503 Service Unavailable</code></strong></p><p>Indicates the FPE service is currently unable to handle the request in a timely manner.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="warning-codes">Warning Codes<a class="hash-link" href="#warning-codes" title="Direct link to heading">​</a></h2><p>Below are all possible warning codes and their descriptions.</p><table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody><tr><td><strong><code>algoConfigUpdated</code></strong></td><td>Due to algorithm-specific implementation constraints, certain aspects of the input model were modified in order for the algorithm to run.  <br> An example of of this is a plan with <code>FIXED-DOLLAR</code> drawdown strategy sent into the Roth Conversion Optimizer.  The drawdown strategy will be changed to <code>SPENDING</code> prior to running the algorithm.</td></tr><tr><td><strong><code>algoImprovedNothing</code></strong></td><td>Given an input model to be solved/optimized, the algorithm was unable to produce a solution that was any better than the one implied by the original input model.</td></tr><tr><td><strong><code>algoGaveUp</code></strong></td><td>Even though a better solution might be possible given more computation time/resources, the algorithm is halting and returning its best solution.</td></tr><tr><td><strong><code>insufficientFunds</code></strong></td><td>A desired withdrawal could not be fully satisfied due to lack of funds in the account.</td></tr><tr><td><strong><code>valueOutOfRange</code></strong></td><td>An input value is outside of the acceptable range for a given FPE query.</td></tr><tr><td><strong><code>noFundsToConvert</code></strong></td><td>The plan provided to the Roth Conversion Optimizer did not contain any funds that were eligible for Roth conversion.</td></tr><tr><td><strong><code>ssConfig</code></strong></td><td>Within the <code>socialSecurity</code> input object, both <code>monthlyBenefit</code> and <code>primaryInsuranceAmount</code> (PIA) were provided, when only 1 is needed. In this case, PIA will take precedence.</td></tr></tbody></table><br><hr><br><h1>API Endpoints</h1><p>Across all FPE endpoints, request and responses are represented as JSON objects.  These data objects are cataloged and described on <a href="/docs/apis/fpe/datatypes/">this page</a>.</p><p>Below are the descriptions of each endpoint.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-v5annuitize"><code>POST /v5/annuitize</code><a class="hash-link" href="#post-v5annuitize" title="Direct link to heading">​</a></h2><p>Estimates the monthly <a href="https://www.investopedia.com/terms/a/annuity.asp" target="_blank" rel="noopener noreferrer">annuity</a> income stream based on a given annuity premium, as well as other information that potentially affects the future income payments.</p><p>For a given <a href="https://www.investopedia.com/terms/a/annuitant.asp" target="_blank" rel="noopener noreferrer">annuitant</a> and (optional) surviving spouse, multiple <a href="#annuityscenario">scenarios</a> may be submitted in batch for the sake of convenience and efficiency.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="annuitizerequest">AnnuitizeRequest<a class="hash-link" href="#annuitizerequest" title="Direct link to heading">​</a></h3><p>This is the top-level request object that is posted to this endpoint.</p><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>currentDate</code></td><td><a href="/docs/apis/fpe/datatypes/#date">Date</a></td><td>Today’s date.</td></tr><tr><td><code>annuitant</code></td><td><a href="#person">Person</a></td><td>The <a href="https://www.investopedia.com/terms/a/annuitant.asp" target="_blank" rel="noopener noreferrer">annuitant</a> is the recepient of the annuity payments.</td></tr><tr><td><code>survivingSpouse</code></td><td><a href="#person">Person</a></td><td>(optional) If the annuitant has a spouse</td></tr><tr><td><code>scenarios</code></td><td><a href="#annuityscenario">AnnuityScenario[]</a></td><td>List of 0 or more annuity calculation scenarios.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="person">Person<a class="hash-link" href="#person" title="Direct link to heading">​</a></h4><p>Represents either the annuitant or their surviving spouse.</p><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>birthDate</code></td><td><a href="/docs/apis/fpe/datatypes/#date">Date</a></td><td>The person’s date of birth.</td></tr><tr><td><code>gender</code></td><td><a href="/docs/apis/fpe/datatypes/#gender">Gender</a></td><td>The person’s gender (required for mortality calculations).</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="annuityscenario">AnnuityScenario<a class="hash-link" href="#annuityscenario" title="Direct link to heading">​</a></h4><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>premium</code></td><td>int</td><td>The lump sum cost of the annuity.</td></tr><tr><td><code>purchaseDate</code></td><td><a href="/docs/apis/fpe/datatypes/#date">Date</a></td><td>The date on which the annuity was purchased.</td></tr><tr><td><code>startDate</code></td><td><a href="/docs/apis/fpe/datatypes/#date">Date</a></td><td>The date on which annuity payments shall commence.</td></tr><tr><td><code>survivorBenefit</code></td><td>float</td><td>Survivor benefit ratio.  This is only relevant when the annuitant has declared a <code>survivingSpouse</code>.  Valid range is <code>[0.0..1.0]</code>.  Default value is <code>0.0</code> if omitted.</td></tr><tr><td><code>cola</code></td><td>float</td><td>Cost of Living Adjustment.  Valid range is <code>[0.0..1.0]</code>.  Default value is <code>0.0</code> if omitted.</td></tr><tr><td><code>yearsCertain</code></td><td>int</td><td>A <a href="https://www.investopedia.com/terms/y/years-certain-annuity.asp" target="_blank" rel="noopener noreferrer">Years Certain annuity</a> pays the holder a continuous monthly income for the specified number of years, regardless of how long the annuitant lives.  Default value is <code>0</code> if omitted.</td></tr><tr><td><code>cashRefund</code></td><td>boolean</td><td>A <a href="https://www.investopedia.com/terms/c/cash-refund-annuity.asp" target="_blank" rel="noopener noreferrer">Cash Refund annuity</a> returns to a beneficiary any sum left over should the annuitant die before breaking even on what they paid in premiums.  Default value is <code>false</code> if omitted.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="annuitizeresponse">AnnuitizeResponse<a class="hash-link" href="#annuitizeresponse" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>monthlyBenefitAmounts</code></td><td>int[]</td><td>Array of monthly benefit amounts, which correspond to the array of <a href="#annuityscenario">scenarios</a> defined in the <a href="#annuitizerequest">AnnuitizeRequest</a> object.</td></tr><tr><td><code>warnings</code></td><td><a href="#what-is-a-warning">Warning[]</a></td><td>List of non-critical warnings.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h3><p>Example request and response JSONs can be found in <a href="examples/annuitize/" target="_blank" rel="noopener noreferrer">examples/annuitize/</a>.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-v5forecast"><code>POST /v5/forecast</code><a class="hash-link" href="#post-v5forecast" title="Direct link to heading">​</a></h2><p>Given a financial <a href="/docs/apis/fpe/datatypes/#plan">plan</a>, this endpoint runs a simulation that generates a forecast of that plan, consisting of some summary information about the future projection, and a set of time series representing the future periodic values of each account and payment stream involved in the simulation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="forecastrequest">ForecastRequest<a class="hash-link" href="#forecastrequest" title="Direct link to heading">​</a></h3><p>This is the top-level request object that is posted to this endpoint.</p><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td><a href="/docs/apis/fpe/datatypes/#forecastparams">ForecastParams</a></td><td>(optional) Configuration for things like optional calculations, time series density, etc.</td></tr><tr><td><code>plan</code></td><td><a href="/docs/apis/fpe/datatypes/#plan">Plan</a></td><td>The financial plan to forecast.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="forecastresponse">ForecastResponse<a class="hash-link" href="#forecastresponse" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>forecast</code></td><td><a href="/docs/apis/fpe/datatypes/#forecast">Forecast</a></td><td>The projected forecast of the submitted plan.</td></tr><tr><td><code>warnings</code></td><td><a href="#what-is-a-warning">Warning[]</a></td><td>List of non-critical warnings.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-scenario">Sample Scenario<a class="hash-link" href="#sample-scenario" title="Direct link to heading">​</a></h3><p>Consider this basic scenario, which is followed by the corresponding JSON request/response:</p><blockquote><p>Scenario: The current date is January 2021.  John is a 60-year-old single male in excellent health.  He expects to live until the age of 90.  John will start claiming social security at age 67 (full retirement age), and knows his PIA will be $2,325. His retirement savings consists of a single IRA with a current balance of $500,000 and an expected AGR of 6% (and a future AGR of 4% starting in 2027).  John works for a company where he earns $7,500/month.  Furthermore, he is participating in an employer-sponsored retirement plan, where he contributes 10% of his salary, and the company matches 50% of his contribution up to 8% of salary.  He plans on retiring at age 67.  John expects to spend $7,000/month in retirement.</p></blockquote><p>The JSON request for this scenario is <a href="examples/forecast/basic/single-01.json" target="_blank" rel="noopener noreferrer">here</a>, and the corresponding JSON response is <a href="examples/forecast/basic/single-01.response.json" target="_blank" rel="noopener noreferrer">here</a>.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-v5info"><code>GET /v5/info</code><a class="hash-link" href="#get-v5info" title="Direct link to heading">​</a></h2><p>Returns information about the deployed web service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-attributes">Response attributes<a class="hash-link" href="#response-attributes" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td>version</td><td>The software version of this running web service.</td></tr><tr><td>buildDate</td><td>When this release tarball was built.</td></tr><tr><td>uptime</td><td>How long this web service has been running. <strong>NOTE</strong>: Depending on the deploy environment, this attribute may not exist (e.g. the AWS Lambda environment is inherently stateless, and so there is no meaningful notion of “uptime”).</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response">Sample response<a class="hash-link" href="#sample-response" title="Direct link to heading">​</a></h3><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;version&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;3.6.2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;buildDate&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;2021-01-04T22:35:47Z&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;uptime&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;9h27m59s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-v5montecarlo"><code>POST /v5/montecarlo</code><a class="hash-link" href="#post-v5montecarlo" title="Direct link to heading">​</a></h2><p>Runs a Monte Carlo simulation for given a <a href="/docs/apis/fpe/datatypes/#plan">plan</a>, returning the probability of not running out of money before goal age.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="montecarlorequest">MonteCarloRequest<a class="hash-link" href="#montecarlorequest" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>plan</code></td><td><a href="/docs/apis/fpe/datatypes/#plan">Plan</a></td><td>The financial plan.</td></tr><tr><td><code>params</code></td><td><a href="#montecarloparams">MonteCarloParams</a></td><td>The input paramters to the simulation.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="montecarloparams">MonteCarloParams<a class="hash-link" href="#montecarloparams" title="Direct link to heading">​</a></h4><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>deterministic</code></td><td>enum</td><td>(optional) Determines how the random variable are generated within the simulation.  Valid values are: <br>- <code>always</code>: The same random seed (and therefore, the same set of random inputs) is used for all requests <br>- <code>monthly</code>: The random seed changes at 12am UTC at the beginning of each month.  This setting is intended for production environments, where the probability score is expected to be stable. <br>- <code>&lt;null&gt;</code>: A different random seed is chosen on each request (effectively nondeterministic)</td></tr><tr><td><code>desiredEstateValue</code></td><td>int</td><td>(optional) Determines if a given path (outcome) within the simulation is considered a success. E.g. if <code>desiredEstateValue</code> is <code>100000</code>, then the plan’s forecasted estate value must be &gt;= 100000.  Default value is 0.</td></tr><tr><td><code>varyInvestmentReturns</code></td><td>boolean</td><td>(optional) Choose random growth rates from a normal distribution for any <a href="/docs/apis/fpe/datatypes/#account">account</a> within the plan based on the <code>mean</code> and <code>stdev</code> of that account’s <a href="/docs/apis/fpe/datatypes/#rate">rate</a>.</td></tr><tr><td><code>varyGeneralInflation</code></td><td>boolean</td><td>(optional) Choose random growth rates from a normal distribution for market inflation based on the <code>mean</code> and <code>stdev</code> of the <a href="/docs/apis/fpe/datatypes/#market">Market.inflation</a> object.</td></tr><tr><td><code>varyMedicalInflation</code></td><td>boolean</td><td>(optional) Choose random growth rates from a normal distribution for medical inflation based on the <code>mean</code> and <code>stdev</code> of the <a href="/docs/apis/fpe/datatypes/#market">Market.medicalInflation</a> object.</td></tr><tr><td><code>varyWageGrowth</code></td><td>boolean</td><td>(optional) For <a href="/docs/apis/fpe/datatypes/#paymentstream">PaymentStreams</a> that represent earned income (i.e. <code>earnedIncome</code> is true), choose random growth rates from a normal distribution based on the <code>mean</code> and <code>stdev</code> of the <a href="/docs/apis/fpe/datatypes/#paymentstream">PaymentStream.Rate</a> object.</td></tr><tr><td><code>analysisPercentiles</code></td><td>int[]</td><td>(optional) A list of percentiles that, if provided, triggers the calculation of <code>analysis.projectedSavings[]</code> and <code>analysis.estateValue[]</code> values for for specified percentiles (see response below).</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="montecarloresponse">MonteCarloResponse<a class="hash-link" href="#montecarloresponse" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>analysis</code></td><td><a href="#montecarloanalysis">MonteCarloAnalysis</a></td><td>The analysis of the Monte Carlo simulation, which contains the success probability and related time series for the requested percentiles.</td></tr><tr><td><code>warnings</code></td><td><a href="#what-is-a-warning">Warning[]</a></td><td>List of non-critical warnings.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="montecarloanalysis">MonteCarloAnalysis<a class="hash-link" href="#montecarloanalysis" title="Direct link to heading">​</a></h4><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>successProbability</code></td><td>float</td><td>The probability that the user’s plan will not run out of money before Goal Age.</td></tr><tr><td><code>pathCount</code></td><td>float</td><td>The number of random paths that were run within the Monte Carlo simulation.</td></tr><tr><td><code>estateValue</code></td><td>object[]</td><td>TODO: document this</td></tr><tr><td><code>projectedSavings</code></td><td>object[]</td><td>TODO: document this</td></tr></tbody></table><p>Sample JSON requests can be found in <a href="examples/montecarlo/" target="_blank" rel="noopener noreferrer">examples/montecarlo/</a>.</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-v5optimizeroth"><code>POST /v5/optimize/roth</code><a class="hash-link" href="#post-v5optimizeroth" title="Direct link to heading">​</a></h2><p>Given a financial <a href="/docs/apis/fpe/datatypes/#plan">Plan</a>, the Roth Conversion Optimizer (RCO) attempts to find an optimal set of Roth conversions that satisfy the given set of goals and constraints (some of which are optional):</p><ol><li>Maximize <a href="/docs/apis/fpe/terms/#estate-value">estate value</a></li><li>Restrict annual conversion amount such that the estimated conversion tax can be funded strictly from <a href="/docs/apis/fpe/datatypes/#accounttype">aftertax</a> accounts.</li></ol><p>If RCO is unable to improve the estate value or no retirement accounts are eligible for Roth conversion, the forecast will contain a a warning message with the code <code>algoImprovedNothing</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rcorequest">RCORequest<a class="hash-link" href="#rcorequest" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>plan</code></td><td><a href="/docs/apis/fpe/datatypes/#plan">Plan</a></td><td>The financial plan.</td></tr><tr><td><code>params</code></td><td><a href="/docs/apis/fpe/datatypes/#forecastparams">ForecastParams</a></td><td>The input parameters that influence this algorithm.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-object">Response object<a class="hash-link" href="#response-object" title="Direct link to heading">​</a></h3><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>plan</code></td><td><a href="/docs/apis/fpe/datatypes/#plan">Plan</a></td><td>The optimized plan containing potentially different Roth optimization transactions</td></tr><tr><td><code>forecast</code></td><td><a href="/docs/apis/fpe/datatypes/#forecast">Forecast</a></td><td>The financial forecast that results from the optimized plan</td></tr><tr><td><code>oldRothConversions</code></td><td><a href="#rothconversion">RothConversion<!-- -->[<!-- -->]</a></td><td>The list of 0 or more Roth conversions from the original plan submitted in the request</td></tr><tr><td><code>newRothConversions</code></td><td><a href="#rothconversion">RothConversion<!-- -->[<!-- -->]</a></td><td>The list of 0 or more Roth conversions recommended by this optimizer</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rothconversion">RothConversion<a class="hash-link" href="#rothconversion" title="Direct link to heading">​</a></h4><p>The <code>RothConversion</code> object represents a one-time transfer from a tax-deferred account into a Roth IRA.</p><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>source</code></td><td>string</td><td>The tax-deferred source account</td></tr><tr><td><code>target</code></td><td>string</td><td>The Roth IRA target account</td></tr><tr><td><code>date</code></td><td><a href="/docs/apis/fpe/datatypes/#date">Date</a></td><td>The date on which the Roth conversion takes place</td></tr><tr><td><code>amount</code></td><td>int</td><td>The monetary amount of the Roth conversion</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/financial-planning-engine-fpe/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Financial Planning Engine (FPE)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/apis/fpe/datatypes/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Structures and Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#errors-vs-warnings" class="table-of-contents__link toc-highlight">Errors vs. Warnings</a><ul><li><a href="#what-is-an-error" class="table-of-contents__link toc-highlight">What is an Error</a></li><li><a href="#what-is-a-warning" class="table-of-contents__link toc-highlight">What is a Warning</a></li></ul></li><li><a href="#http-response-status-codes" class="table-of-contents__link toc-highlight">HTTP Response Status Codes</a></li><li><a href="#warning-codes" class="table-of-contents__link toc-highlight">Warning Codes</a></li><li><a href="#post-v5annuitize" class="table-of-contents__link toc-highlight"><code>POST /v5/annuitize</code></a><ul><li><a href="#annuitizerequest" class="table-of-contents__link toc-highlight">AnnuitizeRequest</a></li><li><a href="#annuitizeresponse" class="table-of-contents__link toc-highlight">AnnuitizeResponse</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#post-v5forecast" class="table-of-contents__link toc-highlight"><code>POST /v5/forecast</code></a><ul><li><a href="#forecastrequest" class="table-of-contents__link toc-highlight">ForecastRequest</a></li><li><a href="#forecastresponse" class="table-of-contents__link toc-highlight">ForecastResponse</a></li><li><a href="#sample-scenario" class="table-of-contents__link toc-highlight">Sample Scenario</a></li></ul></li><li><a href="#get-v5info" class="table-of-contents__link toc-highlight"><code>GET /v5/info</code></a><ul><li><a href="#response-attributes" class="table-of-contents__link toc-highlight">Response attributes</a></li><li><a href="#sample-response" class="table-of-contents__link toc-highlight">Sample response</a></li></ul></li><li><a href="#post-v5montecarlo" class="table-of-contents__link toc-highlight"><code>POST /v5/montecarlo</code></a><ul><li><a href="#montecarlorequest" class="table-of-contents__link toc-highlight">MonteCarloRequest</a></li><li><a href="#montecarloresponse" class="table-of-contents__link toc-highlight">MonteCarloResponse</a></li></ul></li><li><a href="#post-v5optimizeroth" class="table-of-contents__link toc-highlight"><code>POST /v5/optimize/roth</code></a><ul><li><a href="#rcorequest" class="table-of-contents__link toc-highlight">RCORequest</a></li><li><a href="#response-object" class="table-of-contents__link toc-highlight">Response object</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid footerContainer_rP2H"><div class="row"><div class="col col-6 text--left"><span><div class="footer__copyright">Copyright © 2022 NewRetirement, Inc.</div></span></div><div class="col col-6 text--right"><div class="footer__links text--right"><div class="footer__links"><a href="https://github.com/newretirement/fpe-api" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a><span class="footer__link-separator"> </span><a href="mailto:sales@newretirement.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact us</a><span class="footer__link-separator"> </span><a href="https://www.newretirement.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">NewRetirement.com</a></div></div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.f569d088.js"></script>
<script src="/assets/js/main.67aaa0b9.js"></script>
</body>
</html>