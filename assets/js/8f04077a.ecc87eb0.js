"use strict";(self.webpackChunkdevportal=self.webpackChunkdevportal||[]).push([[593],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(h,l(l({ref:t},s),{},{components:a})):n.createElement(h,l({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3681:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));a(8209);const i={},l="Optimal Withdrawal Strategy",o={unversionedId:"apis/fpe/optimal_withdraw",id:"apis/fpe/optimal_withdraw",title:"Optimal Withdrawal Strategy",description:"When modeling an expense in FPE, there are 2 methods for specifying how that expense is sourced:",source:"@site/docs/apis/fpe/optimal_withdraw.md",sourceDirName:"apis/fpe",slug:"/apis/fpe/optimal_withdraw",permalink:"/docs/apis/fpe/optimal_withdraw",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Income-Linked Contributions",permalink:"/docs/apis/fpe/income_linked_contribs"},next:{title:"Output Streams",permalink:"/docs/apis/fpe/output_streams"}},p={},c=[{value:"METHOD 1: Withdraw exclusively from a specific account",id:"method-1-withdraw-exclusively-from-a-specific-account",level:3},{value:"METHOD 2: Optimal Withdrawal Strategy",id:"method-2-optimal-withdrawal-strategy",level:3},{value:"STAGE 1",id:"stage-1",level:4},{value:"STAGE 2",id:"stage-2",level:4},{value:"STAGE 3",id:"stage-3",level:4},{value:"Relevant Terms",id:"relevant-terms",level:2}],s={toc:c};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"optimal-withdrawal-strategy"},"Optimal Withdrawal Strategy"),(0,r.kt)("p",null,"When modeling an ",(0,r.kt)("a",{parentName:"p",href:"/docs/apis/fpe/terms#expense-stream"},"expense")," in FPE, there are 2 methods for specifying how that expense is sourced:"),(0,r.kt)("h3",{id:"method-1-withdraw-exclusively-from-a-specific-account"},"METHOD 1: Withdraw exclusively from a specific account"),(0,r.kt)("p",null,"In this example, $10,000 will be withdrawn annually, and ",(0,r.kt)("u",null,(0,r.kt)("em",{parentName:"p"},"only")),", from the source account named ",(0,r.kt)("inlineCode",{parentName:"p"},'"savings"'),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "vacation",\n    "paymentAmount": 10000,\n    "source": "savings",\n    "paymentsPerYear": 1\n}\n')),(0,r.kt)("p",null,"If there are insufficient funds in the ",(0,r.kt)("inlineCode",{parentName:"p"},'"vacation"')," account to cover the expense, then the actual payment will end up being the account\u2019s remaining balance, and an ",(0,r.kt)("a",{parentName:"p",href:"/docs/apis/fpe/overview#what-is-a-warning"},"insufficientFunds warning")," will be emitted in the FPE response."),(0,r.kt)("h3",{id:"method-2-optimal-withdrawal-strategy"},"METHOD 2: Optimal Withdrawal Strategy"),(0,r.kt)("p",null,"This example demonstrates the ",(0,r.kt)("em",{parentName:"p"},"optimal withdrawal strategy"),". As in the previous example, $10,000 will be withdrawn annually.  However, since the funding source is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"optimal"'),", FPE can potentially withdraw the requested $10K from multiple \u201cshortfall\u201d accounts if the first chosen account can\u2019t cover the full amount."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "medical_expenses",\n    "paymentAmount": 10000,\n    "source": "optimal",\n    "paymentsPerYear": 1\n}\n')),(0,r.kt)("p",null,"FPE evaluates all accounts in the plan, and then derives an optimal withdrawal order when satisfying the full expense amount.  The following 3-stage procedure determines the account withdrawal order:"),(0,r.kt)("h4",{id:"stage-1"},"STAGE 1"),(0,r.kt)("p",null,"Withdraw from the user-specified default checking account (i.e. ",(0,r.kt)("a",{parentName:"p",href:"/docs/apis/fpe/datatypes#cashflow"},"plan.cashFlow.checkingAccount"),")."),(0,r.kt)("h4",{id:"stage-2"},"STAGE 2"),(0,r.kt)("p",null,"Based on their ",(0,r.kt)("a",{parentName:"p",href:"/docs/apis/fpe/datatypes#accounttype"},"account type"),", assign the remaining accounts to the ordered categories below; then sort the accounts based on this category ordering:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"category 0: RMD-eligible accounts ",(0,r.kt)("b",null,"having unsatisfied RMD withdrawals")),(0,r.kt)("li",{parentName:"ul"},"category 1: ",(0,r.kt)("inlineCode",{parentName:"li"},"afterTax")),(0,r.kt)("li",{parentName:"ul"},"category 2: ",(0,r.kt)("inlineCode",{parentName:"li"},"reverseMortgage")),(0,r.kt)("li",{parentName:"ul"},"category 3: ",(0,r.kt)("inlineCode",{parentName:"li"},"ira"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"401k"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"403b"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"457b")),(0,r.kt)("li",{parentName:"ul"},"category 4: ",(0,r.kt)("inlineCode",{parentName:"li"},"aftertax401k"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"aftertax403b")),(0,r.kt)("li",{parentName:"ul"},"category 5: ",(0,r.kt)("inlineCode",{parentName:"li"},"rothIRA"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"roth401k"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"roth403b"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"roth457b")),(0,r.kt)("li",{parentName:"ul"},"category 6: ",(0,r.kt)("inlineCode",{parentName:"li"},"hsa")),(0,r.kt)("li",{parentName:"ul"},"category 7: ",(0,r.kt)("inlineCode",{parentName:"li"},"revolvingCredit"))),(0,r.kt)("p",null,"Note that:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"RMD-eligible accounts include ",(0,r.kt)("inlineCode",{parentName:"li"},"ira"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"401k"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"403b"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"457b")),(0,r.kt)("li",{parentName:"ul"},"Any account type not explicitly defined within the above categories will NOT be withdrawn from.\n")),(0,r.kt)("h4",{id:"stage-3"},"STAGE 3"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Within each account category, sort accounts by increasing ",(0,r.kt)("a",{parentName:"li",href:"https://www.investopedia.com/terms/r/rateofreturn.asp"},"RoR")," (specified by ",(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/datatypes#account"},"account.rate"),")"),(0,r.kt)("li",{parentName:"ol"},"Within each ",(0,r.kt)("em",{parentName:"li"},"(category, RoR)")," equivalence class, the original account order is intentionally preserved to give the API client control over the withdrawal order."),(0,r.kt)("li",{parentName:"ol"},"An account will ",(0,r.kt)("strong",{parentName:"li"},"not")," be withdrawn from if:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Its ",(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/datatypes#account"},"disableOptimalWithdraw")," flag is set to true"),(0,r.kt)("li",{parentName:"ul"},"Its ",(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/datatypes#accounttype"},"account type")," is not listed in one of the above categories (e.g. a ",(0,r.kt)("inlineCode",{parentName:"li"},"loan"),")")))),(0,r.kt)("p",null,"Once the account withdrawal order has been determined for a given month, FPE then attempts to withdraw the requested amount from each account until the full expense has been funded.  If the first account in the withdrawal sequence has insufficient funds, the remaining balance is withdrawn, and FPE moves on to the next account in the sequence, and so on."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"relevant-terms"},"Relevant Terms"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/datatypes#account"},"account")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/datatypes#accounttype"},"accountType")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/apis/fpe/terms#expense-stream"},"expense stream"))))}u.isMDXComponent=!0},8209:(e,t,a)=>{a(7294)}}]);